@startuml

title Contracts Inheritance

abstract class MembersOnly {
    members : mapping(address => bool)
    numMembers : uint

    isMember(): modifier
    addMember(address) isMember: void
    checkMembership(): bool
    pay(person: address, amount: wei): void
}

abstract class Managed {
    commisioner: address
    isCommissioner(): modifier
    setCommissioner(address): void
    addMember(address) isCommissioner: void
}

abstract class Resolver {
    timeResolved : date?
    betClosingTime: date
    {abstract} getWinners(): address[]
}

abstract class YesNoResolver {
    result: bool?
    {abstract} setResolved(bool): void
}

abstract class OracleYesNoResolver {

}

abstract class VoteYesNoResolver {
    votes: mapping(address => bool)
    numYeses: uint
    numNos: uint

    hasntVoted(): modifier
    vote(bool) isMember hasntVoted: void
}

class MajorityVoteYesNoResolver {
    {override} setResolved(bool): void
}

class UnanimousVoteYesNoResolver {
    {override} setResolved(bool): void
}

abstract class ScalarResolver {
    result: int?
}

abstract class VoteScalarResolver {
    votes: mapping(address => int)
}

abstract class Bet {
    title: string
    bets: mapping(address => uint)
    closingTime: date
    wager: event
    payMember: event
    pool: wei

    getWager(address): uint
    getMyWager(): uint
    {virtual} wager(): void
    {abstract} getWinners(): address[]
}

class VoteYesNoBet {
    resolverType: VoteTypeEnum
    betType: BetTypeEnum
}

class HubAndSpokeBet {
    hub: address
    spokes: address[]
}

class OracleYesNoBet {
    checkOracle(): bool?
}

abstract AverageScalarResolver {
    {override} setResolved(int): void
}

abstract UnanimousScalarResolver {
    {override} setResolved(int): void
}

class PriceIsRightBet {
    {override} setResolved(int): void
}

class ClosestBet {
    {override} setResolved(int): void
}

class VoteScalarBet {
    type: ScalarVoteTypeEnum
    betType: BetTypeEnum
}

interface IBet {
    getWinners(): address[]
}

interface IYesNoBet {
    result: bool?
    wager(bool): void
    getMyWager(): bool
    getWager(address): bool
}

interface IScalarBet {
    result: int?
    wager(int)
    getMyWager(): int
    getWager(address): int
    getResult(): int?
}

interface IVoteYesNoBet {
    vote(bool): void
}

interface IVoteScalarBet {
    vote(int): vote
}

interface IOracleYesNoBet {
    checkOracle(): bool?
}

interface IOracleScalarBet {
    checkOracle(): int?
}

Managed --|> MembersOnly
Resolver --|> Managed
YesNoResolver --|> Resolver
ScalarResolver --|> Resolver
VoteYesNoResolver --|> YesNoResolver
OracleYesNoResolver --|> YesNoResolver
MajorityVoteYesNoResolver --|> VoteYesNoResolver
UnanimousVoteYesNoResolver --|> VoteYesNoResolver
VoteScalarResolver --|> ScalarResolver
Bet --|> Managed

IYesNoBet --|> IBet
IScalarBet --|> IBet

IVoteYesNoBet --|> IYesNoBet
IOracleYesNoBet --|> IYesNoBet
IVoteScalarBet --|> IScalarBet
IOracleScalarBet --|> IScalarBet

HubAndSpokeBet --|> Bet

VoteYesNoBet --|> IVoteYesNoBet
VoteYesNoBet --* MajorityVoteYesNoResolver
VoteYesNoBet --* UnanimousVoteYesNoResolver
VoteYesNoBet --* HubAndSpokeBet

OracleYesNoBet --|> Bet
OracleYesNoBet --|> OracleYesNoResolver
OracleYesNoBet --|> IOracleYesNoBet

PriceIsRightBet --|> Bet
ClosestBet --|> Bet
VoteScalarBet --|> IVoteScalarBet
VoteScalarBet --* PriceIsRightBet
VoteScalarBet --* ClosestBet
AverageScalarResolver --|> VoteScalarResolver
UnanimousScalarResolver --|> VoteScalarResolver
VoteScalarBet --* AverageScalarResolver
VoteScalarBet --* UnanimousScalarResolver

@enduml